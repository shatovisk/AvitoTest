# Скриншотное тестирование с использованием Puppeteer, Pixelmatch и PNGJS

Эта инструкция описывает шаги для настройки и выполнения скриншотного тестирования вашего веб-сайта с использованием Puppeteer, Pixelmatch и PNGJS. 

## Шаг 1: Установка Node.js и npm

Убедитесь, что у вас установлены Node.js и npm. Если нет, установите их, следуя инструкциям на официальном сайте Node.js.

## Шаг 2: Подготовка рабочего каталога

Создайте новый рабочий каталог для вашего проекта и перейдите в него:


1. mkdir screenshot-tests
2. cd screenshot-tests


## Шаг 3: Инициализация проекта и установка зависимостей

Инициализируйте проект и установите необходимые зависимости:

1. npm init -y
2. npm install puppeteer pixelmatch pngjs


## Шаг 4: Создание рабочего скрипта

Создайте файл screenshot-tests-with-diffs.js и вставьте в него следующий код из файла "Code_for_Task#2.js"


## Шаг 5: Запуск скрипта

Для выполнения скрипта и создания скриншотов выполните следующую команду:

node screenshot-tests-with-diffs.js


## Объяснение кода

1. Импорт зависимостей:
   - Подключаем puppeteer, fs, pixelmatch и pngjs.

2. Функции для создания и сравнения скриншотов:
   - createScreenshot(element, path): Создает скриншот указанного элемента.
   - createFullPageScreenshot(page, path): Создает скриншот всей страницы.
   - compareImages(img1Path, img2Path, diffPath): Сравнивает два изображения и сохраняет изображение с различиями, если они есть.

3. Основной поток выполнения:
   - Запуск браузера и открытие страницы.
   - Цикл по каждому тест-кейсу для создания и сравнения скриншотов соответствующих элементов или всей страницы.
   - Создание папок для текущих, эталонных и изображений с различиями.
   - Вывод результатов о наличии различий.

## Ожидаемый результат

1. Формирование скриншотов:
   - Скрипт создаст скриншоты для всех определенных тест-кейсов и сохранит их в папке output.

2. Сравнение с базовыми изображениями:
   - При наличии базовых изображений скрипт выполнит сравнение и сохранит диффы (различия) в папке output/diff.

3. Логирование результатов:
   - В консоль будут выведены результаты выполнения, включая информацию о наличии различий пикселей.

Файлы будут сохранены в структуре:
- output/
  - Текущие скриншоты.
- output/baseline/
  - Базовые скриншоты.
- output/diff/
  - Изображения с различиями.

Теперь вы готовы провести скриншотное тестирование и отслеживать визуальные изменения вашего сайта!


